/*! Locuszoom 0.13.0-beta.2 */
var LzCredibleSets =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./esm/ext/lz-credible-sets.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./esm/ext/lz-credible-sets.js":
/*!*************************************!*\
  !*** ./esm/ext/lz-credible-sets.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var gwas_credible_sets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gwas-credible-sets */ "gwas-credible-sets");
/* harmony import */ var gwas_credible_sets__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(gwas_credible_sets__WEBPACK_IMPORTED_MODULE_0__);
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

/**
    Custom code used to power credible sets demonstration example. This is not part of the core LocusZoom library,
    but can be included as a standalone file.

    The page must incorporate and load all libraries before this file can be used, including:
     - Vendor assets
     - LocusZoom
     - gwas-credible-sets (available via NPM or a related CDN)
 @module
*/


function install(LocusZoom) {
  var BaseAdapter = LocusZoom.Adapters.get('BaseAdapter');
  /**
   * Custom data source that calculates the 95% credible set based on provided data.
   * This source must be requested as the second step in a chain, after a previous step that returns fields required
   *  for the calculation.
   *
   * @param {Object} init.params
   * @param {Object} init.params.fields
   * @param {String} init.params.fields.log_pvalue The name of the field containing -log10 pvalue information
   * @param {Number} [init.params.threshold=0.95] The credible set threshold (eg 95%). Will continue selecting SNPs
   *  until the posterior probabilities add up to at least this fraction of the total.
   * @param {Number} [init.params.significance_threshold=7.301] Do not perform a credible set calculation for this
   *  region unless AT LEAST ONE SNP (as -log10p) exceeds the line of GWAS signficance. Otherwise we are declaring a
   *  credible set when there is no evidence of anything being significant at all. If one snp is significant, it will
   *  create a credible set for the entire region; the resulting set may include things below the line of significance.
   */

  var CredibleSetLZ = /*#__PURE__*/function (_BaseAdapter) {
    _inherits(CredibleSetLZ, _BaseAdapter);

    var _super = _createSuper(CredibleSetLZ);

    function CredibleSetLZ(config) {
      var _this;

      _classCallCheck(this, CredibleSetLZ);

      _this = _super.apply(this, arguments);
      _this.dependentSource = true; // Don't do calcs for a region with no assoc data

      return _this;
    }

    _createClass(CredibleSetLZ, [{
      key: "parseInit",
      value: function parseInit(config) {
        _get(_getPrototypeOf(CredibleSetLZ.prototype), "parseInit", this).apply(this, arguments);

        if (!(this.params.fields && this.params.fields.log_pvalue)) {
          throw new Error("Source config for ".concat(this.constructor.SOURCE_NAME, " must specify how to find 'fields.log_pvalue'"));
        } // Set defaults. Default sig threshold is the line of GWAS significance. (as -log10p)


        this.params = Object.assign({
          threshold: 0.95,
          significance_threshold: 7.301
        }, this.params);
      }
    }, {
      key: "getCacheKey",
      value: function getCacheKey(state, chain, fields) {
        var threshold = state.credible_set_threshold || this.params.threshold;
        return [threshold, state.chr, state.start, state.end].join('_');
      }
    }, {
      key: "fetchRequest",
      value: function fetchRequest(state, chain) {
        if (!chain.body.length) {
          // No credible set can be calculated because there is no association data for this region
          return Promise.resolve([]);
        }

        var self = this; // The threshold can be overridden dynamically via `plot.state`, or set when the source is created

        var threshold = state.credible_set_threshold || this.params.threshold; // Calculate raw bayes factors and posterior probabilities based on information returned from the API

        if (typeof chain.body[0][self.params.fields.log_pvalue] === 'undefined') {
          throw new Error('Credible set source could not locate the required fields from a previous request.');
        }

        var nlogpvals = chain.body.map(function (item) {
          return item[self.params.fields.log_pvalue];
        });

        if (!nlogpvals.some(function (val) {
          return val >= self.params.significance_threshold;
        })) {
          // If NO points have evidence of significance, define the credible set to be empty
          //  (rather than make a credible set that we don't think is meaningful)
          return Promise.resolve([]);
        }

        var credset_data = [];

        try {
          var scores = gwas_credible_sets__WEBPACK_IMPORTED_MODULE_0__["scoring"].bayesFactors(nlogpvals);
          var posteriorProbabilities = gwas_credible_sets__WEBPACK_IMPORTED_MODULE_0__["scoring"].normalizeProbabilities(scores); // Use scores to mark the credible set in various ways (depending on your visualization preferences,
          //   some of these may not be needed)

          var credibleSet = gwas_credible_sets__WEBPACK_IMPORTED_MODULE_0__["marking"].findCredibleSet(posteriorProbabilities, threshold);
          var credSetScaled = gwas_credible_sets__WEBPACK_IMPORTED_MODULE_0__["marking"].rescaleCredibleSet(credibleSet);
          var credSetBool = gwas_credible_sets__WEBPACK_IMPORTED_MODULE_0__["marking"].markBoolean(credibleSet); // Annotate each response record based on credible set membership

          for (var i = 0; i < chain.body.length; i++) {
            credset_data.push({
              posterior_prob: posteriorProbabilities[i],
              contrib_fraction: credSetScaled[i],
              is_member: credSetBool[i]
            });
          }
        } catch (e) {
          // If the calculation cannot be completed, return the data without annotation fields
          console.error(e);
        }

        return Promise.resolve(credset_data);
      }
    }, {
      key: "combineChainBody",
      value: function combineChainBody(data, chain, fields, outnames, trans) {
        // At this point namespacing has been applied; add the calculated fields for this source to the chain
        if (chain.body.length && data.length) {
          var _loop = function _loop(i) {
            var src = data[i];
            var dest = chain.body[i];
            Object.keys(src).forEach(function (attr) {
              dest[attr] = src[attr];
            });
          };

          for (var i = 0; i < data.length; i++) {
            _loop(i);
          }
        }

        return chain.body;
      }
    }]);

    return CredibleSetLZ;
  }(BaseAdapter);

  LocusZoom.Adapters.add('CredibleSetLZ', CredibleSetLZ); // Add related layouts to the central global registry

  LocusZoom.Layouts.add('tooltip', 'association_credible_set', function () {
    // Extend a known tooltip with an extra row of info showing posterior probabilities
    var l = LocusZoom.Layouts.get('tooltip', 'standard_association', {
      unnamespaced: true
    });
    l.html += '{{#if {{namespace[credset]}}posterior_prob}}<br>Posterior probability: <strong>{{{{namespace[credset]}}posterior_prob|scinotation|htmlescape}}</strong>{{/if}}';
    return l;
  }());
  LocusZoom.Layouts.add('tooltip', 'annotation_credible_set', {
    namespace: {
      'assoc': 'assoc',
      'credset': 'credset'
    },
    closable: true,
    show: {
      or: ['highlighted', 'selected']
    },
    hide: {
      and: ['unhighlighted', 'unselected']
    },
    html: '<strong>{{{{namespace[assoc]}}variant|htmlescape}}</strong><br>' + 'P Value: <strong>{{{{namespace[assoc]}}log_pvalue|logtoscinotation|htmlescape}}</strong><br>' + '{{#if {{namespace[credset]}}posterior_prob}}<br>Posterior probability: <strong>{{{{namespace[credset]}}posterior_prob|scinotation|htmlescape}}</strong>{{/if}}'
  });
  LocusZoom.Layouts.add('data_layer', 'association_credible_set', function () {
    var base = LocusZoom.Layouts.get('data_layer', 'association_pvalues', {
      unnamespaced: true,
      id: 'associationcredibleset',
      namespace: {
        'assoc': 'assoc',
        'credset': 'credset',
        'ld': 'ld'
      },
      fill_opacity: 0.7,
      tooltip: LocusZoom.Layouts.get('tooltip', 'association_credible_set', {
        unnamespaced: true
      }),
      fields: ['{{namespace[assoc]}}variant', '{{namespace[assoc]}}position', '{{namespace[assoc]}}log_pvalue', '{{namespace[assoc]}}log_pvalue|logtoscinotation', '{{namespace[assoc]}}ref_allele', '{{namespace[credset]}}posterior_prob', '{{namespace[credset]}}contrib_fraction', '{{namespace[credset]}}is_member', '{{namespace[ld]}}state', '{{namespace[ld]}}isrefvar'],
      match: {
        send: '{{namespace[assoc]}}variant',
        receive: '{{namespace[assoc]}}variant'
      }
    });
    base.color.unshift({
      field: 'lz_highlight_match',
      // Special field name whose presence triggers custom rendering
      scale_function: 'if',
      parameters: {
        field_value: true,
        then: '#FFf000'
      }
    });
    return base;
  }());
  LocusZoom.Layouts.add('data_layer', 'annotation_credible_set', {
    namespace: {
      'assoc': 'assoc',
      'credset': 'credset'
    },
    id: 'annotationcredibleset',
    type: 'annotation_track',
    id_field: '{{namespace[assoc]}}variant',
    x_axis: {
      field: '{{namespace[assoc]}}position'
    },
    color: [{
      field: 'lz_highlight_match',
      // Special field name whose presence triggers custom rendering
      scale_function: 'if',
      parameters: {
        field_value: true,
        then: '#001cee'
      }
    }, '#00CC00'],
    fields: ['{{namespace[assoc]}}variant', '{{namespace[assoc]}}position', '{{namespace[assoc]}}log_pvalue', '{{namespace[credset]}}posterior_prob', '{{namespace[credset]}}contrib_fraction', '{{namespace[credset]}}is_member'],
    match: {
      send: '{{namespace[assoc]}}variant',
      receive: '{{namespace[assoc]}}variant'
    },
    filters: [// Specify which points to show on the track. Any selection must satisfy ALL filters
    {
      field: '{{namespace[credset]}}is_member',
      operator: '=',
      value: true
    }],
    behaviors: {
      onmouseover: [{
        action: 'set',
        status: 'highlighted'
      }],
      onmouseout: [{
        action: 'unset',
        status: 'highlighted'
      }],
      onclick: [{
        action: 'toggle',
        status: 'selected',
        exclusive: true
      }],
      onshiftclick: [{
        action: 'toggle',
        status: 'selected'
      }]
    },
    tooltip: LocusZoom.Layouts.get('tooltip', 'annotation_credible_set', {
      unnamespaced: true
    }),
    tooltip_positioning: 'top'
  });
  LocusZoom.Layouts.add('panel', 'annotation_credible_set', {
    id: 'annotationcredibleset',
    title: {
      text: 'SNPs in 95% credible set',
      x: 50,
      style: {
        'font-size': '14px'
      }
    },
    width: 800,
    height: 45,
    min_height: 45,
    proportional_width: 1,
    margin: {
      top: 25,
      right: 50,
      bottom: 0,
      left: 50
    },
    inner_border: 'rgb(210, 210, 210)',
    toolbar: LocusZoom.Layouts.get('toolbar', 'standard_panel', {
      unnamespaced: true
    }),
    interaction: {
      drag_background_to_pan: true,
      scroll_to_zoom: true,
      x_linked: true
    },
    data_layers: [LocusZoom.Layouts.get('data_layer', 'annotation_credible_set', {
      unnamespaced: true
    })]
  });
  LocusZoom.Layouts.add('panel', 'association_credible_set', function () {
    var l = LocusZoom.Layouts.get('panel', 'association', {
      unnamespaced: true,
      id: 'associationcrediblesets',
      namespace: {
        'assoc': 'assoc',
        'credset': 'credset'
      },
      data_layers: [LocusZoom.Layouts.get('data_layer', 'significance', {
        unnamespaced: true
      }), LocusZoom.Layouts.get('data_layer', 'recomb_rate', {
        unnamespaced: true
      }), LocusZoom.Layouts.get('data_layer', 'association_credible_set', {
        unnamespaced: true
      })]
    }); // Add "display options" button to control how credible set coloring is overlaid on the standard association plot

    l.toolbar.widgets.push({
      type: 'display_options',
      position: 'right',
      color: 'blue',
      // Below: special config specific to this widget
      button_html: 'Display options...',
      button_title: 'Control how plot items are displayed',
      layer_name: 'associationcredibleset',
      default_config_display_name: 'Linkage Disequilibrium (default)',
      // display name for the default plot color option (allow user to revert to plot defaults)
      options: [{
        // First dropdown menu item
        display_name: '95% credible set (boolean)',
        // Human readable representation of field name
        display: {
          // Specify layout directives that control display of the plot for this option
          point_shape: 'circle',
          point_size: 40,
          color: {
            field: '{{namespace[credset]}}is_member',
            scale_function: 'if',
            parameters: {
              field_value: true,
              then: '#00CC00',
              "else": '#CCCCCC'
            }
          },
          legend: [// Tells the legend how to represent this display option
          {
            shape: 'circle',
            color: '#00CC00',
            size: 40,
            label: 'In credible set',
            "class": 'lz-data_layer-scatter'
          }, {
            shape: 'circle',
            color: '#CCCCCC',
            size: 40,
            label: 'Not in credible set',
            "class": 'lz-data_layer-scatter'
          }]
        }
      }, {
        // Second option. The same plot- or even the same field- can be colored in more than one way.
        display_name: '95% credible set (gradient by contribution)',
        display: {
          point_shape: 'circle',
          point_size: 40,
          color: [{
            field: '{{namespace[credset]}}contrib_fraction',
            scale_function: 'if',
            parameters: {
              field_value: 0,
              then: '#777777'
            }
          }, {
            scale_function: 'interpolate',
            field: '{{namespace[credset]}}contrib_fraction',
            parameters: {
              breaks: [0, 1],
              values: ['#fafe87', '#9c0000']
            }
          }],
          legend: [{
            shape: 'circle',
            color: '#777777',
            size: 40,
            label: 'No contribution',
            "class": 'lz-data_layer-scatter'
          }, {
            shape: 'circle',
            color: '#fafe87',
            size: 40,
            label: 'Some contribution',
            "class": 'lz-data_layer-scatter'
          }, {
            shape: 'circle',
            color: '#9c0000',
            size: 40,
            label: 'Most contribution',
            "class": 'lz-data_layer-scatter'
          }]
        }
      }]
    });
    return l;
  }());
  LocusZoom.Layouts.add('plot', 'association_credible_set', {
    state: {},
    width: 800,
    height: 450,
    responsive_resize: true,
    min_region_scale: 20000,
    max_region_scale: 1000000,
    toolbar: LocusZoom.Layouts.get('toolbar', 'standard_association', {
      unnamespaced: true
    }),
    panels: [LocusZoom.Layouts.get('panel', 'association_credible_set', {
      unnamespaced: true
    }), LocusZoom.Layouts.get('panel', 'annotation_credible_set', {
      unnamespaced: true
    }), LocusZoom.Layouts.get('panel', 'genes', {
      unnamespaced: true
    })]
  });
}

if (typeof LocusZoom !== 'undefined') {
  // Auto-register the plugin when included as a script tag. ES6 module users must register via LocusZoom.use()
  // eslint-disable-next-line no-undef
  LocusZoom.use(install);
}

/* harmony default export */ __webpack_exports__["default"] = (install);

/***/ }),

/***/ "gwas-credible-sets":
/*!***********************************!*\
  !*** external "gwasCredibleSets" ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = gwasCredibleSets;

/***/ })

/******/ })["default"];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vZXNtL2V4dC9sei1jcmVkaWJsZS1zZXRzLmpzIiwid2VicGFjazovL1tuYW1lXS9leHRlcm5hbCBcImd3YXNDcmVkaWJsZVNldHNcIiJdLCJuYW1lcyI6WyJpbnN0YWxsIiwiTG9jdXNab29tIiwiQmFzZUFkYXB0ZXIiLCJBZGFwdGVycyIsImdldCIsIkNyZWRpYmxlU2V0TFoiLCJjb25maWciLCJhcmd1bWVudHMiLCJkZXBlbmRlbnRTb3VyY2UiLCJwYXJhbXMiLCJmaWVsZHMiLCJsb2dfcHZhbHVlIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIlNPVVJDRV9OQU1FIiwiT2JqZWN0IiwiYXNzaWduIiwidGhyZXNob2xkIiwic2lnbmlmaWNhbmNlX3RocmVzaG9sZCIsInN0YXRlIiwiY2hhaW4iLCJjcmVkaWJsZV9zZXRfdGhyZXNob2xkIiwiY2hyIiwic3RhcnQiLCJlbmQiLCJqb2luIiwiYm9keSIsImxlbmd0aCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2VsZiIsIm5sb2dwdmFscyIsIm1hcCIsIml0ZW0iLCJzb21lIiwidmFsIiwiY3JlZHNldF9kYXRhIiwic2NvcmVzIiwic2NvcmluZyIsImJheWVzRmFjdG9ycyIsInBvc3RlcmlvclByb2JhYmlsaXRpZXMiLCJub3JtYWxpemVQcm9iYWJpbGl0aWVzIiwiY3JlZGlibGVTZXQiLCJtYXJraW5nIiwiZmluZENyZWRpYmxlU2V0IiwiY3JlZFNldFNjYWxlZCIsInJlc2NhbGVDcmVkaWJsZVNldCIsImNyZWRTZXRCb29sIiwibWFya0Jvb2xlYW4iLCJpIiwicHVzaCIsInBvc3Rlcmlvcl9wcm9iIiwiY29udHJpYl9mcmFjdGlvbiIsImlzX21lbWJlciIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJkYXRhIiwib3V0bmFtZXMiLCJ0cmFucyIsInNyYyIsImRlc3QiLCJrZXlzIiwiZm9yRWFjaCIsImF0dHIiLCJhZGQiLCJMYXlvdXRzIiwibCIsInVubmFtZXNwYWNlZCIsImh0bWwiLCJuYW1lc3BhY2UiLCJjbG9zYWJsZSIsInNob3ciLCJvciIsImhpZGUiLCJhbmQiLCJiYXNlIiwiaWQiLCJmaWxsX29wYWNpdHkiLCJ0b29sdGlwIiwibWF0Y2giLCJzZW5kIiwicmVjZWl2ZSIsImNvbG9yIiwidW5zaGlmdCIsImZpZWxkIiwic2NhbGVfZnVuY3Rpb24iLCJwYXJhbWV0ZXJzIiwiZmllbGRfdmFsdWUiLCJ0aGVuIiwidHlwZSIsImlkX2ZpZWxkIiwieF9heGlzIiwiZmlsdGVycyIsIm9wZXJhdG9yIiwidmFsdWUiLCJiZWhhdmlvcnMiLCJvbm1vdXNlb3ZlciIsImFjdGlvbiIsInN0YXR1cyIsIm9ubW91c2VvdXQiLCJvbmNsaWNrIiwiZXhjbHVzaXZlIiwib25zaGlmdGNsaWNrIiwidG9vbHRpcF9wb3NpdGlvbmluZyIsInRpdGxlIiwidGV4dCIsIngiLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwibWluX2hlaWdodCIsInByb3BvcnRpb25hbF93aWR0aCIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsImlubmVyX2JvcmRlciIsInRvb2xiYXIiLCJpbnRlcmFjdGlvbiIsImRyYWdfYmFja2dyb3VuZF90b19wYW4iLCJzY3JvbGxfdG9fem9vbSIsInhfbGlua2VkIiwiZGF0YV9sYXllcnMiLCJ3aWRnZXRzIiwicG9zaXRpb24iLCJidXR0b25faHRtbCIsImJ1dHRvbl90aXRsZSIsImxheWVyX25hbWUiLCJkZWZhdWx0X2NvbmZpZ19kaXNwbGF5X25hbWUiLCJvcHRpb25zIiwiZGlzcGxheV9uYW1lIiwiZGlzcGxheSIsInBvaW50X3NoYXBlIiwicG9pbnRfc2l6ZSIsImxlZ2VuZCIsInNoYXBlIiwic2l6ZSIsImxhYmVsIiwiYnJlYWtzIiwidmFsdWVzIiwicmVzcG9uc2l2ZV9yZXNpemUiLCJtaW5fcmVnaW9uX3NjYWxlIiwibWF4X3JlZ2lvbl9zY2FsZSIsInBhbmVscyIsInVzZSJd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c0IsT0FBdEIsRUFBK0IsT0FBL0IsRUFBd0M7QUFBRWdFLGtCQUFZLEVBQUU7QUFBaEIsS0FBeEMsQ0FISTtBQVI4QyxHQUExRDtBQWVIOztBQUdELElBQUksT0FBT25FLFNBQVAsS0FBcUIsV0FBekIsRUFBc0M7QUFDbEM7QUFDQTtBQUNBQSxXQUFTLENBQUNpSixHQUFWLENBQWNsSixPQUFkO0FBQ0g7O0FBR2NBLHNFQUFmLEU7Ozs7Ozs7Ozs7O0FDN1dBLGtDIiwiZmlsZSI6ImV4dC9sei1jcmVkaWJsZS1zZXRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vZXNtL2V4dC9sei1jcmVkaWJsZS1zZXRzLmpzXCIpO1xuIiwiLyoqXG4gICAgQ3VzdG9tIGNvZGUgdXNlZCB0byBwb3dlciBjcmVkaWJsZSBzZXRzIGRlbW9uc3RyYXRpb24gZXhhbXBsZS4gVGhpcyBpcyBub3QgcGFydCBvZiB0aGUgY29yZSBMb2N1c1pvb20gbGlicmFyeSxcbiAgICBidXQgY2FuIGJlIGluY2x1ZGVkIGFzIGEgc3RhbmRhbG9uZSBmaWxlLlxuXG4gICAgVGhlIHBhZ2UgbXVzdCBpbmNvcnBvcmF0ZSBhbmQgbG9hZCBhbGwgbGlicmFyaWVzIGJlZm9yZSB0aGlzIGZpbGUgY2FuIGJlIHVzZWQsIGluY2x1ZGluZzpcbiAgICAgLSBWZW5kb3IgYXNzZXRzXG4gICAgIC0gTG9jdXNab29tXG4gICAgIC0gZ3dhcy1jcmVkaWJsZS1zZXRzIChhdmFpbGFibGUgdmlhIE5QTSBvciBhIHJlbGF0ZWQgQ0ROKVxuIEBtb2R1bGVcbiovXG5cbmltcG9ydCB7bWFya2luZywgc2NvcmluZ30gZnJvbSAnZ3dhcy1jcmVkaWJsZS1zZXRzJztcblxuZnVuY3Rpb24gaW5zdGFsbCAoTG9jdXNab29tKSB7XG4gICAgY29uc3QgQmFzZUFkYXB0ZXIgPSBMb2N1c1pvb20uQWRhcHRlcnMuZ2V0KCdCYXNlQWRhcHRlcicpO1xuICAgIC8qKlxuICAgICAqIEN1c3RvbSBkYXRhIHNvdXJjZSB0aGF0IGNhbGN1bGF0ZXMgdGhlIDk1JSBjcmVkaWJsZSBzZXQgYmFzZWQgb24gcHJvdmlkZWQgZGF0YS5cbiAgICAgKiBUaGlzIHNvdXJjZSBtdXN0IGJlIHJlcXVlc3RlZCBhcyB0aGUgc2Vjb25kIHN0ZXAgaW4gYSBjaGFpbiwgYWZ0ZXIgYSBwcmV2aW91cyBzdGVwIHRoYXQgcmV0dXJucyBmaWVsZHMgcmVxdWlyZWRcbiAgICAgKiAgZm9yIHRoZSBjYWxjdWxhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbml0LnBhcmFtc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbml0LnBhcmFtcy5maWVsZHNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaW5pdC5wYXJhbXMuZmllbGRzLmxvZ19wdmFsdWUgVGhlIG5hbWUgb2YgdGhlIGZpZWxkIGNvbnRhaW5pbmcgLWxvZzEwIHB2YWx1ZSBpbmZvcm1hdGlvblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbaW5pdC5wYXJhbXMudGhyZXNob2xkPTAuOTVdIFRoZSBjcmVkaWJsZSBzZXQgdGhyZXNob2xkIChlZyA5NSUpLiBXaWxsIGNvbnRpbnVlIHNlbGVjdGluZyBTTlBzXG4gICAgICogIHVudGlsIHRoZSBwb3N0ZXJpb3IgcHJvYmFiaWxpdGllcyBhZGQgdXAgdG8gYXQgbGVhc3QgdGhpcyBmcmFjdGlvbiBvZiB0aGUgdG90YWwuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtpbml0LnBhcmFtcy5zaWduaWZpY2FuY2VfdGhyZXNob2xkPTcuMzAxXSBEbyBub3QgcGVyZm9ybSBhIGNyZWRpYmxlIHNldCBjYWxjdWxhdGlvbiBmb3IgdGhpc1xuICAgICAqICByZWdpb24gdW5sZXNzIEFUIExFQVNUIE9ORSBTTlAgKGFzIC1sb2cxMHApIGV4Y2VlZHMgdGhlIGxpbmUgb2YgR1dBUyBzaWduZmljYW5jZS4gT3RoZXJ3aXNlIHdlIGFyZSBkZWNsYXJpbmcgYVxuICAgICAqICBjcmVkaWJsZSBzZXQgd2hlbiB0aGVyZSBpcyBubyBldmlkZW5jZSBvZiBhbnl0aGluZyBiZWluZyBzaWduaWZpY2FudCBhdCBhbGwuIElmIG9uZSBzbnAgaXMgc2lnbmlmaWNhbnQsIGl0IHdpbGxcbiAgICAgKiAgY3JlYXRlIGEgY3JlZGlibGUgc2V0IGZvciB0aGUgZW50aXJlIHJlZ2lvbjsgdGhlIHJlc3VsdGluZyBzZXQgbWF5IGluY2x1ZGUgdGhpbmdzIGJlbG93IHRoZSBsaW5lIG9mIHNpZ25pZmljYW5jZS5cbiAgICAgKi9cbiAgICBjbGFzcyBDcmVkaWJsZVNldExaIGV4dGVuZHMgQmFzZUFkYXB0ZXIge1xuICAgICAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmRlcGVuZGVudFNvdXJjZSA9IHRydWU7IC8vIERvbid0IGRvIGNhbGNzIGZvciBhIHJlZ2lvbiB3aXRoIG5vIGFzc29jIGRhdGFcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnNlSW5pdChjb25maWcpIHtcbiAgICAgICAgICAgIHN1cGVyLnBhcnNlSW5pdCguLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJhbXMuZmllbGRzICYmIHRoaXMucGFyYW1zLmZpZWxkcy5sb2dfcHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU291cmNlIGNvbmZpZyBmb3IgJHt0aGlzLmNvbnN0cnVjdG9yLlNPVVJDRV9OQU1FfSBtdXN0IHNwZWNpZnkgaG93IHRvIGZpbmQgJ2ZpZWxkcy5sb2dfcHZhbHVlJ2ApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXQgZGVmYXVsdHMuIERlZmF1bHQgc2lnIHRocmVzaG9sZCBpcyB0aGUgbGluZSBvZiBHV0FTIHNpZ25pZmljYW5jZS4gKGFzIC1sb2cxMHApXG4gICAgICAgICAgICB0aGlzLnBhcmFtcyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgICAgeyB0aHJlc2hvbGQ6IDAuOTUsIHNpZ25pZmljYW5jZV90aHJlc2hvbGQ6IDcuMzAxIH0sXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBnZXRDYWNoZUtleSAoc3RhdGUsIGNoYWluLCBmaWVsZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRocmVzaG9sZCA9IHN0YXRlLmNyZWRpYmxlX3NldF90aHJlc2hvbGQgfHwgdGhpcy5wYXJhbXMudGhyZXNob2xkO1xuICAgICAgICAgICAgcmV0dXJuIFt0aHJlc2hvbGQsIHN0YXRlLmNociwgc3RhdGUuc3RhcnQsIHN0YXRlLmVuZF0uam9pbignXycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZmV0Y2hSZXF1ZXN0KHN0YXRlLCBjaGFpbikge1xuICAgICAgICAgICAgaWYgKCFjaGFpbi5ib2R5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIE5vIGNyZWRpYmxlIHNldCBjYW4gYmUgY2FsY3VsYXRlZCBiZWNhdXNlIHRoZXJlIGlzIG5vIGFzc29jaWF0aW9uIGRhdGEgZm9yIHRoaXMgcmVnaW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgLy8gVGhlIHRocmVzaG9sZCBjYW4gYmUgb3ZlcnJpZGRlbiBkeW5hbWljYWxseSB2aWEgYHBsb3Quc3RhdGVgLCBvciBzZXQgd2hlbiB0aGUgc291cmNlIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgIGNvbnN0IHRocmVzaG9sZCA9IHN0YXRlLmNyZWRpYmxlX3NldF90aHJlc2hvbGQgfHwgdGhpcy5wYXJhbXMudGhyZXNob2xkO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHJhdyBiYXllcyBmYWN0b3JzIGFuZCBwb3N0ZXJpb3IgcHJvYmFiaWxpdGllcyBiYXNlZCBvbiBpbmZvcm1hdGlvbiByZXR1cm5lZCBmcm9tIHRoZSBBUElcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2hhaW4uYm9keVswXVtzZWxmLnBhcmFtcy5maWVsZHMubG9nX3B2YWx1ZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDcmVkaWJsZSBzZXQgc291cmNlIGNvdWxkIG5vdCBsb2NhdGUgdGhlIHJlcXVpcmVkIGZpZWxkcyBmcm9tIGEgcHJldmlvdXMgcmVxdWVzdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5sb2dwdmFscyA9IGNoYWluLmJvZHkubWFwKChpdGVtKSA9PiBpdGVtW3NlbGYucGFyYW1zLmZpZWxkcy5sb2dfcHZhbHVlXSk7XG5cbiAgICAgICAgICAgIGlmICghbmxvZ3B2YWxzLnNvbWUoKHZhbCkgPT4gdmFsID49IHNlbGYucGFyYW1zLnNpZ25pZmljYW5jZV90aHJlc2hvbGQpKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgTk8gcG9pbnRzIGhhdmUgZXZpZGVuY2Ugb2Ygc2lnbmlmaWNhbmNlLCBkZWZpbmUgdGhlIGNyZWRpYmxlIHNldCB0byBiZSBlbXB0eVxuICAgICAgICAgICAgICAgIC8vICAocmF0aGVyIHRoYW4gbWFrZSBhIGNyZWRpYmxlIHNldCB0aGF0IHdlIGRvbid0IHRoaW5rIGlzIG1lYW5pbmdmdWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNyZWRzZXRfZGF0YSA9IFtdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzY29yZXMgPSBzY29yaW5nLmJheWVzRmFjdG9ycyhubG9ncHZhbHMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvc3RlcmlvclByb2JhYmlsaXRpZXMgPSBzY29yaW5nLm5vcm1hbGl6ZVByb2JhYmlsaXRpZXMoc2NvcmVzKTtcblxuICAgICAgICAgICAgICAgIC8vIFVzZSBzY29yZXMgdG8gbWFyayB0aGUgY3JlZGlibGUgc2V0IGluIHZhcmlvdXMgd2F5cyAoZGVwZW5kaW5nIG9uIHlvdXIgdmlzdWFsaXphdGlvbiBwcmVmZXJlbmNlcyxcbiAgICAgICAgICAgICAgICAvLyAgIHNvbWUgb2YgdGhlc2UgbWF5IG5vdCBiZSBuZWVkZWQpXG4gICAgICAgICAgICAgICAgY29uc3QgY3JlZGlibGVTZXQgPSBtYXJraW5nLmZpbmRDcmVkaWJsZVNldChwb3N0ZXJpb3JQcm9iYWJpbGl0aWVzLCB0aHJlc2hvbGQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNyZWRTZXRTY2FsZWQgPSBtYXJraW5nLnJlc2NhbGVDcmVkaWJsZVNldChjcmVkaWJsZVNldCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3JlZFNldEJvb2wgPSBtYXJraW5nLm1hcmtCb29sZWFuKGNyZWRpYmxlU2V0KTtcblxuICAgICAgICAgICAgICAgIC8vIEFubm90YXRlIGVhY2ggcmVzcG9uc2UgcmVjb3JkIGJhc2VkIG9uIGNyZWRpYmxlIHNldCBtZW1iZXJzaGlwXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFpbi5ib2R5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWRzZXRfZGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rlcmlvcl9wcm9iOiBwb3N0ZXJpb3JQcm9iYWJpbGl0aWVzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYl9mcmFjdGlvbjogY3JlZFNldFNjYWxlZFtpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzX21lbWJlcjogY3JlZFNldEJvb2xbaV0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2FsY3VsYXRpb24gY2Fubm90IGJlIGNvbXBsZXRlZCwgcmV0dXJuIHRoZSBkYXRhIHdpdGhvdXQgYW5ub3RhdGlvbiBmaWVsZHNcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVkc2V0X2RhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29tYmluZUNoYWluQm9keShkYXRhLCBjaGFpbiwgZmllbGRzLCBvdXRuYW1lcywgdHJhbnMpIHtcbiAgICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgbmFtZXNwYWNpbmcgaGFzIGJlZW4gYXBwbGllZDsgYWRkIHRoZSBjYWxjdWxhdGVkIGZpZWxkcyBmb3IgdGhpcyBzb3VyY2UgdG8gdGhlIGNoYWluXG4gICAgICAgICAgICBpZiAoY2hhaW4uYm9keS5sZW5ndGggJiYgZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjID0gZGF0YVtpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzdCA9IGNoYWluLmJvZHlbaV07XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNyYykuZm9yRWFjaChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdFthdHRyXSA9IHNyY1thdHRyXTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoYWluLmJvZHk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIExvY3VzWm9vbS5BZGFwdGVycy5hZGQoJ0NyZWRpYmxlU2V0TFonLCBDcmVkaWJsZVNldExaKTtcblxuICAgIC8vIEFkZCByZWxhdGVkIGxheW91dHMgdG8gdGhlIGNlbnRyYWwgZ2xvYmFsIHJlZ2lzdHJ5XG4gICAgTG9jdXNab29tLkxheW91dHMuYWRkKCd0b29sdGlwJywgJ2Fzc29jaWF0aW9uX2NyZWRpYmxlX3NldCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gRXh0ZW5kIGEga25vd24gdG9vbHRpcCB3aXRoIGFuIGV4dHJhIHJvdyBvZiBpbmZvIHNob3dpbmcgcG9zdGVyaW9yIHByb2JhYmlsaXRpZXNcbiAgICAgICAgY29uc3QgbCA9IExvY3VzWm9vbS5MYXlvdXRzLmdldCgndG9vbHRpcCcsICdzdGFuZGFyZF9hc3NvY2lhdGlvbicsIHsgdW5uYW1lc3BhY2VkOiB0cnVlIH0pO1xuICAgICAgICBsLmh0bWwgKz0gJ3t7I2lmIHt7bmFtZXNwYWNlW2NyZWRzZXRdfX1wb3N0ZXJpb3JfcHJvYn19PGJyPlBvc3RlcmlvciBwcm9iYWJpbGl0eTogPHN0cm9uZz57e3t7bmFtZXNwYWNlW2NyZWRzZXRdfX1wb3N0ZXJpb3JfcHJvYnxzY2lub3RhdGlvbnxodG1sZXNjYXBlfX08L3N0cm9uZz57ey9pZn19JztcbiAgICAgICAgcmV0dXJuIGw7XG4gICAgfSgpKTtcblxuICAgIExvY3VzWm9vbS5MYXlvdXRzLmFkZCgndG9vbHRpcCcsICdhbm5vdGF0aW9uX2NyZWRpYmxlX3NldCcsIHtcbiAgICAgICAgbmFtZXNwYWNlOiB7ICdhc3NvYyc6ICdhc3NvYycsICdjcmVkc2V0JzogJ2NyZWRzZXQnIH0sXG4gICAgICAgIGNsb3NhYmxlOiB0cnVlLFxuICAgICAgICBzaG93OiB7IG9yOiBbJ2hpZ2hsaWdodGVkJywgJ3NlbGVjdGVkJ10gfSxcbiAgICAgICAgaGlkZTogeyBhbmQ6IFsndW5oaWdobGlnaHRlZCcsICd1bnNlbGVjdGVkJ10gfSxcbiAgICAgICAgaHRtbDogJzxzdHJvbmc+e3t7e25hbWVzcGFjZVthc3NvY119fXZhcmlhbnR8aHRtbGVzY2FwZX19PC9zdHJvbmc+PGJyPidcbiAgICAgICAgICAgICsgJ1AgVmFsdWU6IDxzdHJvbmc+e3t7e25hbWVzcGFjZVthc3NvY119fWxvZ19wdmFsdWV8bG9ndG9zY2lub3RhdGlvbnxodG1sZXNjYXBlfX08L3N0cm9uZz48YnI+JyArXG4gICAgICAgICAgICAne3sjaWYge3tuYW1lc3BhY2VbY3JlZHNldF19fXBvc3Rlcmlvcl9wcm9ifX08YnI+UG9zdGVyaW9yIHByb2JhYmlsaXR5OiA8c3Ryb25nPnt7e3tuYW1lc3BhY2VbY3JlZHNldF19fXBvc3Rlcmlvcl9wcm9ifHNjaW5vdGF0aW9ufGh0bWxlc2NhcGV9fTwvc3Ryb25nPnt7L2lmfX0nLFxuICAgIH0pO1xuXG4gICAgTG9jdXNab29tLkxheW91dHMuYWRkKCdkYXRhX2xheWVyJywgJ2Fzc29jaWF0aW9uX2NyZWRpYmxlX3NldCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgYmFzZSA9IExvY3VzWm9vbS5MYXlvdXRzLmdldCgnZGF0YV9sYXllcicsICdhc3NvY2lhdGlvbl9wdmFsdWVzJywge1xuICAgICAgICAgICAgdW5uYW1lc3BhY2VkOiB0cnVlLFxuICAgICAgICAgICAgaWQ6ICdhc3NvY2lhdGlvbmNyZWRpYmxlc2V0JyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogeyAnYXNzb2MnOiAnYXNzb2MnLCAnY3JlZHNldCc6ICdjcmVkc2V0JywgJ2xkJzogJ2xkJyB9LFxuICAgICAgICAgICAgZmlsbF9vcGFjaXR5OiAwLjcsXG4gICAgICAgICAgICB0b29sdGlwOiBMb2N1c1pvb20uTGF5b3V0cy5nZXQoJ3Rvb2x0aXAnLCAnYXNzb2NpYXRpb25fY3JlZGlibGVfc2V0JywgeyB1bm5hbWVzcGFjZWQ6IHRydWUgfSksXG4gICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgICAne3tuYW1lc3BhY2VbYXNzb2NdfX12YXJpYW50JywgJ3t7bmFtZXNwYWNlW2Fzc29jXX19cG9zaXRpb24nLFxuICAgICAgICAgICAgICAgICd7e25hbWVzcGFjZVthc3NvY119fWxvZ19wdmFsdWUnLCAne3tuYW1lc3BhY2VbYXNzb2NdfX1sb2dfcHZhbHVlfGxvZ3Rvc2Npbm90YXRpb24nLFxuICAgICAgICAgICAgICAgICd7e25hbWVzcGFjZVthc3NvY119fXJlZl9hbGxlbGUnLFxuICAgICAgICAgICAgICAgICd7e25hbWVzcGFjZVtjcmVkc2V0XX19cG9zdGVyaW9yX3Byb2InLCAne3tuYW1lc3BhY2VbY3JlZHNldF19fWNvbnRyaWJfZnJhY3Rpb24nLFxuICAgICAgICAgICAgICAgICd7e25hbWVzcGFjZVtjcmVkc2V0XX19aXNfbWVtYmVyJyxcbiAgICAgICAgICAgICAgICAne3tuYW1lc3BhY2VbbGRdfX1zdGF0ZScsICd7e25hbWVzcGFjZVtsZF19fWlzcmVmdmFyJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtYXRjaDogeyBzZW5kOiAne3tuYW1lc3BhY2VbYXNzb2NdfX12YXJpYW50JywgcmVjZWl2ZTogJ3t7bmFtZXNwYWNlW2Fzc29jXX19dmFyaWFudCcgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGJhc2UuY29sb3IudW5zaGlmdCh7XG4gICAgICAgICAgICBmaWVsZDogJ2x6X2hpZ2hsaWdodF9tYXRjaCcsICAvLyBTcGVjaWFsIGZpZWxkIG5hbWUgd2hvc2UgcHJlc2VuY2UgdHJpZ2dlcnMgY3VzdG9tIHJlbmRlcmluZ1xuICAgICAgICAgICAgc2NhbGVfZnVuY3Rpb246ICdpZicsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgICAgZmllbGRfdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgdGhlbjogJyNGRmYwMDAnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBiYXNlO1xuICAgIH0oKSk7XG5cbiAgICBMb2N1c1pvb20uTGF5b3V0cy5hZGQoJ2RhdGFfbGF5ZXInLCAnYW5ub3RhdGlvbl9jcmVkaWJsZV9zZXQnLCB7XG4gICAgICAgIG5hbWVzcGFjZTogeyAnYXNzb2MnOiAnYXNzb2MnLCAnY3JlZHNldCc6ICdjcmVkc2V0JyB9LFxuICAgICAgICBpZDogJ2Fubm90YXRpb25jcmVkaWJsZXNldCcsXG4gICAgICAgIHR5cGU6ICdhbm5vdGF0aW9uX3RyYWNrJyxcbiAgICAgICAgaWRfZmllbGQ6ICd7e25hbWVzcGFjZVthc3NvY119fXZhcmlhbnQnLFxuICAgICAgICB4X2F4aXM6IHtcbiAgICAgICAgICAgIGZpZWxkOiAne3tuYW1lc3BhY2VbYXNzb2NdfX1wb3NpdGlvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGNvbG9yOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZmllbGQ6ICdsel9oaWdobGlnaHRfbWF0Y2gnLCAgLy8gU3BlY2lhbCBmaWVsZCBuYW1lIHdob3NlIHByZXNlbmNlIHRyaWdnZXJzIGN1c3RvbSByZW5kZXJpbmdcbiAgICAgICAgICAgICAgICBzY2FsZV9mdW5jdGlvbjogJ2lmJyxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0aGVuOiAnIzAwMWNlZScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnIzAwQ0MwMCcsXG4gICAgICAgIF0sXG4gICAgICAgIGZpZWxkczogWyd7e25hbWVzcGFjZVthc3NvY119fXZhcmlhbnQnLCAne3tuYW1lc3BhY2VbYXNzb2NdfX1wb3NpdGlvbicsICd7e25hbWVzcGFjZVthc3NvY119fWxvZ19wdmFsdWUnLCAne3tuYW1lc3BhY2VbY3JlZHNldF19fXBvc3Rlcmlvcl9wcm9iJywgJ3t7bmFtZXNwYWNlW2NyZWRzZXRdfX1jb250cmliX2ZyYWN0aW9uJywgJ3t7bmFtZXNwYWNlW2NyZWRzZXRdfX1pc19tZW1iZXInXSxcbiAgICAgICAgbWF0Y2g6IHsgc2VuZDogJ3t7bmFtZXNwYWNlW2Fzc29jXX19dmFyaWFudCcsIHJlY2VpdmU6ICd7e25hbWVzcGFjZVthc3NvY119fXZhcmlhbnQnIH0sXG4gICAgICAgIGZpbHRlcnM6IFtcbiAgICAgICAgICAgIC8vIFNwZWNpZnkgd2hpY2ggcG9pbnRzIHRvIHNob3cgb24gdGhlIHRyYWNrLiBBbnkgc2VsZWN0aW9uIG11c3Qgc2F0aXNmeSBBTEwgZmlsdGVyc1xuICAgICAgICAgICAgeyBmaWVsZDogJ3t7bmFtZXNwYWNlW2NyZWRzZXRdfX1pc19tZW1iZXInLCBvcGVyYXRvcjogJz0nLCB2YWx1ZTogdHJ1ZSB9LFxuICAgICAgICBdLFxuICAgICAgICBiZWhhdmlvcnM6IHtcbiAgICAgICAgICAgIG9ubW91c2VvdmVyOiBbXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZXQnLCBzdGF0dXM6ICdoaWdobGlnaHRlZCcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBvbm1vdXNlb3V0OiBbXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICd1bnNldCcsIHN0YXR1czogJ2hpZ2hsaWdodGVkJyB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG9uY2xpY2s6IFtcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3RvZ2dsZScsIHN0YXR1czogJ3NlbGVjdGVkJywgZXhjbHVzaXZlOiB0cnVlIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgb25zaGlmdGNsaWNrOiBbXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICd0b2dnbGUnLCBzdGF0dXM6ICdzZWxlY3RlZCcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHRvb2x0aXA6IExvY3VzWm9vbS5MYXlvdXRzLmdldCgndG9vbHRpcCcsICdhbm5vdGF0aW9uX2NyZWRpYmxlX3NldCcsIHsgdW5uYW1lc3BhY2VkOiB0cnVlIH0pLFxuICAgICAgICB0b29sdGlwX3Bvc2l0aW9uaW5nOiAndG9wJyxcbiAgICB9KTtcblxuICAgIExvY3VzWm9vbS5MYXlvdXRzLmFkZCgncGFuZWwnLCAnYW5ub3RhdGlvbl9jcmVkaWJsZV9zZXQnLCB7XG4gICAgICAgIGlkOiAnYW5ub3RhdGlvbmNyZWRpYmxlc2V0JyxcbiAgICAgICAgdGl0bGU6IHsgdGV4dDogJ1NOUHMgaW4gOTUlIGNyZWRpYmxlIHNldCcsIHg6IDUwLCBzdHlsZTogeyAnZm9udC1zaXplJzogJzE0cHgnIH0gfSxcbiAgICAgICAgd2lkdGg6IDgwMCxcbiAgICAgICAgaGVpZ2h0OiA0NSxcbiAgICAgICAgbWluX2hlaWdodDogNDUsXG4gICAgICAgIHByb3BvcnRpb25hbF93aWR0aDogMSxcbiAgICAgICAgbWFyZ2luOiB7IHRvcDogMjUsIHJpZ2h0OiA1MCwgYm90dG9tOiAwLCBsZWZ0OiA1MCB9LFxuICAgICAgICBpbm5lcl9ib3JkZXI6ICdyZ2IoMjEwLCAyMTAsIDIxMCknLFxuICAgICAgICB0b29sYmFyOiBMb2N1c1pvb20uTGF5b3V0cy5nZXQoJ3Rvb2xiYXInLCAnc3RhbmRhcmRfcGFuZWwnLCB7IHVubmFtZXNwYWNlZDogdHJ1ZSB9KSxcbiAgICAgICAgaW50ZXJhY3Rpb246IHtcbiAgICAgICAgICAgIGRyYWdfYmFja2dyb3VuZF90b19wYW46IHRydWUsXG4gICAgICAgICAgICBzY3JvbGxfdG9fem9vbTogdHJ1ZSxcbiAgICAgICAgICAgIHhfbGlua2VkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBkYXRhX2xheWVyczogW1xuICAgICAgICAgICAgTG9jdXNab29tLkxheW91dHMuZ2V0KCdkYXRhX2xheWVyJywgJ2Fubm90YXRpb25fY3JlZGlibGVfc2V0JywgeyB1bm5hbWVzcGFjZWQ6IHRydWUgfSksXG4gICAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBMb2N1c1pvb20uTGF5b3V0cy5hZGQoJ3BhbmVsJywgJ2Fzc29jaWF0aW9uX2NyZWRpYmxlX3NldCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgbCA9IExvY3VzWm9vbS5MYXlvdXRzLmdldCgncGFuZWwnLCAnYXNzb2NpYXRpb24nLCB7XG4gICAgICAgICAgICB1bm5hbWVzcGFjZWQ6IHRydWUsXG4gICAgICAgICAgICBpZDogJ2Fzc29jaWF0aW9uY3JlZGlibGVzZXRzJyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogeyAnYXNzb2MnOiAnYXNzb2MnLCAnY3JlZHNldCc6ICdjcmVkc2V0JyB9LFxuICAgICAgICAgICAgZGF0YV9sYXllcnM6IFtcbiAgICAgICAgICAgICAgICBMb2N1c1pvb20uTGF5b3V0cy5nZXQoJ2RhdGFfbGF5ZXInLCAnc2lnbmlmaWNhbmNlJywgeyB1bm5hbWVzcGFjZWQ6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgTG9jdXNab29tLkxheW91dHMuZ2V0KCdkYXRhX2xheWVyJywgJ3JlY29tYl9yYXRlJywgeyB1bm5hbWVzcGFjZWQ6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgTG9jdXNab29tLkxheW91dHMuZ2V0KCdkYXRhX2xheWVyJywgJ2Fzc29jaWF0aW9uX2NyZWRpYmxlX3NldCcsIHsgdW5uYW1lc3BhY2VkOiB0cnVlIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFkZCBcImRpc3BsYXkgb3B0aW9uc1wiIGJ1dHRvbiB0byBjb250cm9sIGhvdyBjcmVkaWJsZSBzZXQgY29sb3JpbmcgaXMgb3ZlcmxhaWQgb24gdGhlIHN0YW5kYXJkIGFzc29jaWF0aW9uIHBsb3RcbiAgICAgICAgbC50b29sYmFyLndpZGdldHMucHVzaChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGlzcGxheV9vcHRpb25zJyxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JpZ2h0JyxcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLFxuICAgICAgICAgICAgICAgIC8vIEJlbG93OiBzcGVjaWFsIGNvbmZpZyBzcGVjaWZpYyB0byB0aGlzIHdpZGdldFxuICAgICAgICAgICAgICAgIGJ1dHRvbl9odG1sOiAnRGlzcGxheSBvcHRpb25zLi4uJyxcbiAgICAgICAgICAgICAgICBidXR0b25fdGl0bGU6ICdDb250cm9sIGhvdyBwbG90IGl0ZW1zIGFyZSBkaXNwbGF5ZWQnLFxuICAgICAgICAgICAgICAgIGxheWVyX25hbWU6ICdhc3NvY2lhdGlvbmNyZWRpYmxlc2V0JyxcbiAgICAgICAgICAgICAgICBkZWZhdWx0X2NvbmZpZ19kaXNwbGF5X25hbWU6ICdMaW5rYWdlIERpc2VxdWlsaWJyaXVtIChkZWZhdWx0KScsIC8vIGRpc3BsYXkgbmFtZSBmb3IgdGhlIGRlZmF1bHQgcGxvdCBjb2xvciBvcHRpb24gKGFsbG93IHVzZXIgdG8gcmV2ZXJ0IHRvIHBsb3QgZGVmYXVsdHMpXG5cbiAgICAgICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGRyb3Bkb3duIG1lbnUgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9uYW1lOiAnOTUlIGNyZWRpYmxlIHNldCAoYm9vbGVhbiknLCAgLy8gSHVtYW4gcmVhZGFibGUgcmVwcmVzZW50YXRpb24gb2YgZmllbGQgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogeyAgLy8gU3BlY2lmeSBsYXlvdXQgZGlyZWN0aXZlcyB0aGF0IGNvbnRyb2wgZGlzcGxheSBvZiB0aGUgcGxvdCBmb3IgdGhpcyBvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludF9zaGFwZTogJ2NpcmNsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRfc2l6ZTogNDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6ICd7e25hbWVzcGFjZVtjcmVkc2V0XX19aXNfbWVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVfZnVuY3Rpb246ICdpZicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbjogJyMwMENDMDAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogJyNDQ0NDQ0MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVnZW5kOiBbIC8vIFRlbGxzIHRoZSBsZWdlbmQgaG93IHRvIHJlcHJlc2VudCB0aGlzIGRpc3BsYXkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlOiAnY2lyY2xlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzAwQ0MwMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiA0MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnSW4gY3JlZGlibGUgc2V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnbHotZGF0YV9sYXllci1zY2F0dGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGU6ICdjaXJjbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjQ0NDQ0NDJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDQwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdOb3QgaW4gY3JlZGlibGUgc2V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnbHotZGF0YV9sYXllci1zY2F0dGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2Vjb25kIG9wdGlvbi4gVGhlIHNhbWUgcGxvdC0gb3IgZXZlbiB0aGUgc2FtZSBmaWVsZC0gY2FuIGJlIGNvbG9yZWQgaW4gbW9yZSB0aGFuIG9uZSB3YXkuXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X25hbWU6ICc5NSUgY3JlZGlibGUgc2V0IChncmFkaWVudCBieSBjb250cmlidXRpb24pJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludF9zaGFwZTogJ2NpcmNsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRfc2l6ZTogNDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6ICd7e25hbWVzcGFjZVtjcmVkc2V0XX19Y29udHJpYl9mcmFjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZV9mdW5jdGlvbjogJ2lmJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF92YWx1ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVuOiAnIzc3Nzc3NycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZV9mdW5jdGlvbjogJ2ludGVycG9sYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiAne3tuYW1lc3BhY2VbY3JlZHNldF19fWNvbnRyaWJfZnJhY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrczogWzAsIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogWycjZmFmZTg3JywgJyM5YzAwMDAnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGU6ICdjaXJjbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjNzc3Nzc3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDQwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdObyBjb250cmlidXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICdsei1kYXRhX2xheWVyLXNjYXR0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTogJ2NpcmNsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNmYWZlODcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogNDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1NvbWUgY29udHJpYnV0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnbHotZGF0YV9sYXllci1zY2F0dGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGU6ICdjaXJjbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjOWMwMDAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDQwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdNb3N0IGNvbnRyaWJ1dGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ2x6LWRhdGFfbGF5ZXItc2NhdHRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGw7XG4gICAgfSgpKTtcblxuICAgIExvY3VzWm9vbS5MYXlvdXRzLmFkZCgncGxvdCcsICdhc3NvY2lhdGlvbl9jcmVkaWJsZV9zZXQnLCB7XG4gICAgICAgIHN0YXRlOiB7fSxcbiAgICAgICAgd2lkdGg6IDgwMCxcbiAgICAgICAgaGVpZ2h0OiA0NTAsXG4gICAgICAgIHJlc3BvbnNpdmVfcmVzaXplOiB0cnVlLFxuICAgICAgICBtaW5fcmVnaW9uX3NjYWxlOiAyMDAwMCxcbiAgICAgICAgbWF4X3JlZ2lvbl9zY2FsZTogMTAwMDAwMCxcbiAgICAgICAgdG9vbGJhcjogTG9jdXNab29tLkxheW91dHMuZ2V0KCd0b29sYmFyJywgJ3N0YW5kYXJkX2Fzc29jaWF0aW9uJywgeyB1bm5hbWVzcGFjZWQ6IHRydWUgfSksXG4gICAgICAgIHBhbmVsczogW1xuICAgICAgICAgICAgTG9jdXNab29tLkxheW91dHMuZ2V0KCdwYW5lbCcsICdhc3NvY2lhdGlvbl9jcmVkaWJsZV9zZXQnLCB7IHVubmFtZXNwYWNlZDogdHJ1ZSB9KSxcbiAgICAgICAgICAgIExvY3VzWm9vbS5MYXlvdXRzLmdldCgncGFuZWwnLCAnYW5ub3RhdGlvbl9jcmVkaWJsZV9zZXQnLCB7IHVubmFtZXNwYWNlZDogdHJ1ZSB9KSxcbiAgICAgICAgICAgIExvY3VzWm9vbS5MYXlvdXRzLmdldCgncGFuZWwnLCAnZ2VuZXMnLCB7IHVubmFtZXNwYWNlZDogdHJ1ZSB9KSxcbiAgICAgICAgXSxcbiAgICB9KTtcblxufVxuXG5cbmlmICh0eXBlb2YgTG9jdXNab29tICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEF1dG8tcmVnaXN0ZXIgdGhlIHBsdWdpbiB3aGVuIGluY2x1ZGVkIGFzIGEgc2NyaXB0IHRhZy4gRVM2IG1vZHVsZSB1c2VycyBtdXN0IHJlZ2lzdGVyIHZpYSBMb2N1c1pvb20udXNlKClcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICBMb2N1c1pvb20udXNlKGluc3RhbGwpO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IGluc3RhbGw7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGd3YXNDcmVkaWJsZVNldHM7Il0sInNvdXJjZVJvb3QiOiIifQ==